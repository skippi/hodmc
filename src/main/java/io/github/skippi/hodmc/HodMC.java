/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package io.github.skippi.hodmc;

import org.bukkit.*;
import org.bukkit.plugin.java.JavaPlugin;
import org.bukkit.scheduler.BukkitScheduler;

public class HodMC extends JavaPlugin {
    private Runnable ticker = this::tickDay;

    @Override
    public void onEnable() {
        World world = getServer().getWorld("world");
        world.setFullTime(0);
        BukkitScheduler scheduler = getServer().getScheduler();
        scheduler.scheduleSyncRepeatingTask(this, () ->  ticker.run(), 0, 1);
    }

    private void tickDay() {
        World world = getServer().getWorld("world");
        world.setFullTime(world.getFullTime() + 6);
        if (world.getFullTime() >= 13000) {
            ticker = this::tickNight;
        }
    }

    private void tickNight() {
        World world = getServer().getWorld("world");
        world.setFullTime(18000);
        world.setGameRule(GameRule.DO_DAYLIGHT_CYCLE, false);
    }
}
